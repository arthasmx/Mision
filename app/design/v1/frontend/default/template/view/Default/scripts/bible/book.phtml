<?php
  $iteration           = 0;
  $mid                 = $this->book['chapter'] / 2;
  $book_details        = array('book'=>$this->book['book'], 'chapter'=>$this->book['chapter'], 'verses'=>$this->book['verses'], 'testament'=>$this->book['testament'] );
  $chapters_per_column = ( $mid > 35 )  ? 35 : $this->book['chapter'] / 2;
?>

<div class="all-panel">
  <div id="bible-book">

    <div class="opened">

      <?=App::module('Addons')->renderBlock("bible/index","options", array("section" => "book", "book_id" => $this->book['book_id'], "details" => $book_details) )?>

      <div class="top">
        <div class="t-left"></div> <div class="t-right"></div>
      </div>

      <div class="mid">
        <div class="current-book">
          <?php foreach($this->book['separated'] AS $key=>$char): ?>
            <?=$char."<br />"?>
          <?php endforeach; ?>
        </div>
        <ul>
          <?php for($chapter = 1; $chapter <= $this->book['chapter']; $chapter++): ?>
            <?php if( $iteration >= $chapters_per_column ) :?>
              </ul><ul>
            <?php $iteration=0; endif; ?>

            <li>
              <a href="<?=App::base( App::xlat('route_bible') . $this->book['seo'] . "/$chapter" )?>">
                <?= App::xlat('BIBLE_chapter') . " " . $chapter; ?>
              </a>
            </li>
          <?php $iteration++; endfor; ?>
        </ul>

      </div>

      <div class="bot">
        <div class="b-left"></div> <div class="b-right"></div>
      </div>
    </div>

  </div>
</div>


<?php
/*
$book
Array
(
  [book_id] => 1
  [book] => Génesis
  [seo] => genesis
  [lang_id] => 1
  [testament] => old
  [name] => Español
  [prefix] => es
  [namespace] => es_MX
  [status] => 1
  [verses] => 1533
  [chapter] => 50
  [separated] => Array
    (
      [0] => G
      [1] => e
      [2] => n
      [3] => e
      [4] => s
      [5] => i
      [6] => s
    )
)
*/
?>